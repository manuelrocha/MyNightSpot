<html>
  <head>
    <title>My Night Spot</title>
    <meta charset="utf-8"/>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- Icons -->
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

    <!-- Select 2-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/3.5.4/select2.min.css" rel="stylesheet"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/3.5.4/select2.min.js"></script>
    <!--Internal-->
    <link rel="stylesheet" type="text/css" href="../css/main.css"/>

  </head>

  <body>
    <div id="mySidenav" class="sidenav" onmouseleave="closeNav()">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a href="html\main.html">Espa√ßos</a>
        <a href="#">Eventos</a>
        <a href="#">Contactos</a>
    </div>
    <div class="container-fluid">

      <!-- MENU -->
      <div class="row image-backgroud">
        <div class="col-sm-12">

          <div class="dropdown" onclick="openNav()">
            <button class="btn btn-secondary dropdown-toggle" type="button"
              id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false" ><i class="fa fa-bars"  ></i></button>
            
          </div>

          </div>
        </div>
        <!-- MENU -->

    </div>

    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-12">

          <!-- Clubs -->
          <div class="col-sm-3" >
             <input type="hidden" style="width:100%" id=cities >
          </div>

          <script>
            //cities
              $( function() {
                var xmlhttp = new XMLHttpRequest();
                var url = "http://192.168.1.76:8080?GetLocalizations";

                xmlhttp.onreadystatechange = function() {
                  if (this.readyState == 4 && this.status == 200) {
                    var localizations = JSON.parse(this.responseText);
                    var data = [];
                    for (var id in localizations) {
                      $("#Localizations").append('<option value=' + id + '>' + localizations[id] + '</option>');
                      data.push({id:id, text: localizations[id]});
                    }

                    $("#cities").select2({
                      placeholder: "Select City",
                      allowClear: true,
                      data: data,
                      minimumResultsForSearch: -1
                    }).on('change', function(e) {
                      var xmlhttp = new XMLHttpRequest();
                      var url = "http://192.168.1.76:8080?GetPlaces";

                       xmlhttp.onreadystatechange = function() {
                         if (this.readyState == 4 && this.status == 200) {
                           var places = JSON.parse(this.responseText);
                           var city = $("#cities").select2('val');
                           var data =[];

                           for (var id in places) {
                             for (var idx in places[id]) {
                               if (idx == city) {
                                data.push({
                                  id:id,
                                  text: places[id][idx]
                                });
                               }
                             }
                           }

                          $("#clubs").select2('destroy');
                              $("#clubs").select2({
                                  placeholder: "Select Club",
                                  allowClear: true,
                                  data: data,
                                  minimumResultsForSearch: -1
                            });
                         }
                       };
                       xmlhttp.open("GET", url, true);
                       xmlhttp.send();
                     });
                  }
                };
                xmlhttp.open("GET", url, true);
                xmlhttp.send();
              });
            </script>

          <div class="col-sm-3"  >
            <input type="hidden" style="width:100%" id=clubs >
          </div>

          <script>
            $("#clubs").select2({
              placeholder: "Select Club",
              allowClear: true,
              data: [],
              minimumResultsForSearch: -1
            });
         </script>

         <!-- Calendar -->
         <div class="col-sm-3">
           <input type="hidden" type="text"  id="datepicker" size="0">
           <i class="col-sm-2 fa fa-calendar calendar" id="icon-calendar"></i>
         </div>

         <script>
           $( function() {
             $( "#datepicker" ).datepicker({
               showAnim: 'slideDown',
               buttonImageOnly: true
             });
           });

           $("#icon-calendar").click(function() {
             if (!$("#datepicker").datepicker( "widget" ).is(":visible")) {
               $("#datepicker").datepicker("show");
             }
           });
         </script>

         <script type="text/javascript">
             
             /* Set the width of the side navigation to 250px and the left margin of the page content to 250px and add a black background color to body */
            function openNav() {
                document.getElementById("mySidenav").style.width = "250px";
                document.body.style.backgroundColor = "rgba(0,0,0,0.4)";
            }

            /* Set the width of the side navigation to 0 and the left margin of the page content to 0, and the background color of body to white */
            function closeNav() {
                document.getElementById("mySidenav").style.width = "0";
                document.body.style.backgroundColor = "white";
            }

           </script>

        </div>
      </div>
    </div>

    <div class="row" style="height:400px;">
      <div class="col-sm-12">
      </div>
    </div>

  </body>

  <footer>
  </footer>

</html>
